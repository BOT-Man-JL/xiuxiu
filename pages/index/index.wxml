<!--index.wxml-->

<!--每一条内容-->
<view class="list-container">
  <view class="list-item" wx:for="{{ articleList }}" wx:key="id">
    <!--作者头像-->
    <view class="avatar-container">
      <image class="avatar" mode="aspectFill" src="{{ item.metaData.authorAvatar }}" />
    </view>

    <!--右边的部分-->
    <view class="list-item-right">
      <!--右边的发布者信息-->
      <view class="list-item-header">
        <text class="item-author-text">{{ item.metaData.authorName }}</text>
        <view class="list-item-detail">
          <text class="list-item-text">{{ item.metaData.timestamp }}</text>
          <view class="location-container">
            <image class="location-icon" src="../../resources/home/location-gray.png" />
            <text class="list-item-text">{{ item.metaData.location }}</text>
          </view>
        </view>

        <!--右边发布的内容-->
        <view class="list-item-data-container">
          <!-- 文本 -->
          <view wx:if="{{ item.articleData.text }}" class="list-item-main-text">
            <text>{{ item.articleData.text}}</text>
          </view>

          <!-- 图片 -->
          <view wx:if="{{ item.articleType == 'picture' }}" class="large-image-item">
            <image src="{{ item.articleData.picture.src }}" mode="widthFix" />
          </view>

          <!-- 图集 -->
          <view wx:if="{{ item.articleType == 'pictures' }}" class="image-album">
            <image wx:for="{{ item.articleData.pictures }}" wx:for-item="picture" wx:key="url" src="{{ picture.src }}" mode="widthFix" />
          </view>

          <!-- 视频 -->
          <view wx:if="{{ item.articleType == 'video' }}" class="video-item">
            <video src="{{ item.articleData.video.src }}" poster="{{ item.articleData.video.poster }}" />
          </view>

          <!-- 外链 -->
          <view wx:if="{{ item.articleType == 'link' }}" class="link-item">
            <image src="{{ item.articleData.link.thumb }}" mode="widthFix" />
            <text>{{ item.articleData.link.abstractText}}</text>
          </view>
        </view>

        <!-- 底部的按钮 -->
        <view class="item-action">
          <view class="item-action-left">
            <!-- 加火 -->
            <view class="icon-with-text">
              <image class="action-icon" src="../../resources/home/fire-gray.png" />
              <text class="action-text">{{ item.communityData.fireCount }}</text>
            </view>
            <!-- 评论 -->
            <view class="icon-with-text">
              <image class="action-icon" src="../../resources/home/comment.png" />
              <text class="action-text">{{ item.communityData.commentCount }}</text>
            </view>
          </view>
          <!-- 分享 -->
          <view class=".item-action-right">
            <image class="share-icon" src="../../resources/home/share.png" />
          </view>
        </view>
      </view>
    </view>
  </view>
</view>